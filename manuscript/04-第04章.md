# 第4章 工作流五步法：从流程图到流水线

你在上一章画好了一张漂亮的流程图，兴冲冲地打开 Coze，把五个步骤配好了五个 Agent——选题 Agent、大纲 Agent、搜索 Agent、写稿 Agent、排版 Agent，全部就位。

你满怀期待地点击「运行」。

结果，选题 Agent 输出了一段 200 字的分析段落，而大纲 Agent 期望接收的是一个 10 字以内的标题关键词。两个 Agent 鸡同鸭讲，流水线在第一个接头处就卡死了。

你调了一下午，发现问题越修越多：有的步骤根本不知道该让 AI 做还是人做；有的步骤输出格式和下一步的输入格式对不上；最后好不容易跑通了一次，却没有保存配置，第二天想复现，又要从头调试。

**这就是「有蓝图、没施工规范」的典型翻车。**

流程图解决了「做什么」的问题，但还有三个关键问题没有回答：**做到什么标准？谁来做？怎么沉淀复用？** 这一章的「工作流五步法」，就是帮你把一张纸上的蓝图，变成一条真正能跑起来的流水线。

![工作流五步法全景图](images/chapter4_five_steps_overview.png)

## 4.1 第一步：明确任务的目标与交付物

这是 99% 的人第一步就走错的地方。我们太习惯于「被动接收任务」，却很少追问「终点在哪」。

**❌ 错误反应：**
接到任务：「去做一份行业研究。」
你的反应：打开搜索引擎，输入关键词，开始漫无目的地浏览。存了 50 个网页，却不知道该怎么拼成一份报告。

**💥 后果：**
你会陷入「资料的汪洋大海」。看了很多，也存了很多，但最后写出来的东西，老板只看了一眼就搁在一旁：「这不是我要的。」

更严重的是——如果你把这个模糊目标直接交给 Agent，后果会被成倍放大。在传统工作中，目标不清晰顶多导致你个人低效；而在 AI 协作中，目标不清晰会直接导致 Agent 产出垃圾。因为 AI 没有「猜老板意思」的能力，你写在目标定义里的每一个字，最终都会变成 Agent 的执行约束。你不写，它就不做。

**✅ 正确逻辑：**
在动手之前，先动脑。把「模糊的意向」翻译成「具体的交付物」。

不要问「我要做什么」，要问「做完之后，我手里拿着的那个东西长什么样？」

**📝【第一步：目标定义卡】**

| 填空项 | 填写说明 | 示范 |
| :--- | :--- | :--- |
| **任务一句话** | 动词 + 核心名词 | 输出一份新能源车行业分析报告 |
| **解决什么问题** | 这个任务为了回答谁的什么疑问？ | 回答投资总监「明年该投整车厂还是电池厂」的决策疑问 |
| **交付物形态** | 成品的具体样子，**必须定死** | 一份 PDF 幻灯片，不少于 20 页 |
| **验收标准** | 怎么才算「做完了」？ | 必须包含近 3 年市场规模数据、前 5 名竞品优劣势对比表、至少 3 条投资建议 |

**💡 为什么这一步对 AI 协作尤其关键？**

目标定义卡上的四个字段，未来会直接对应 Agent 工作流中的**全局参数**：
- 「任务一句话」= 工作流的名称和触发条件
- 「交付物形态」= 最终输出的格式约束
- 「验收标准」= 质检 Agent 的判断依据

你在这张卡上写得越精确，后面每个 Agent 的行为就越可控。

![模糊目标 vs 精确目标](images/chapter4_goal_definition.png)

**【心法】**
如果你无法用一句话描述清楚「交付物长什么样」，那就不要开始下一步。否则你做的所有动作都是无效消耗。

## 4.2 第二步：将动作拆解到「原子级」

在第3章中，你已经学会了把大任务拆成几个步骤。但第3章的拆解是「骨架级」的——粗线条够用，细节不够执行。

这一步，我们要把拆解做到原子级。

**❌ 错误反应：**
「步骤就是：搜集资料 -> 写报告。」

**💥 后果：**
「搜集资料」是一个巨大的黑箱。去哪搜？搜什么关键词？怎么筛选？因为步骤太粗，你每次执行时都要重新思考一遍，这就导致了拖延和内耗。而如果把这个黑箱直接交给 Agent，它会更加不知所措——Agent 不会「自行判断」，它只会「严格执行」。你给的指令越模糊，它的输出越离谱。

**✅ 正确逻辑：**
什么叫原子级？「不可再分，且不需思考就能执行」的动作。

想象一下，如果让你把任务交给一个只会按按钮的机器人，你需要给它写多少条指令？

**📝【第二步：从骨架到原子的拆解对照】**

| 第3章的骨架级 | **第4章的原子级（这才是工作流的真正骨架）** |
| :--- | :--- |
| **1. 搜集资料** | 1.1 打开 3 个指定新闻网站（36Kr、虎嗅、财新）<br>1.2 搜索关键词「新能源 + 趋势 + 2025」<br>1.3 筛选发布时间在近半年内的文章<br>1.4 取前 10 篇文章，提取每篇的核心观点段落（100-200字） |
| **2. 整理数据** | 2.1 将 10 段核心观点汇总到一个文档<br>2.2 删去重复或高度相似的观点<br>2.3 按「政策、技术、市场」三个维度分类<br>2.4 每个维度提炼出 1-2 条核心趋势结论 |
| **3. 撰写报告** | 3.1 根据核心结论生成三级标题大纲<br>3.2 每个章节按「结论 + 数据支撑 + 案例」结构扩写<br>3.3 撰写开篇摘要（200字以内）和结尾投资建议<br>3.4 统一格式、校对数据，输出 PDF |

![从骨架级到原子级拆解](images/chapter4_atomic_breakdown.png)

**区分骨架级和原子级的标准是什么？**

问自己一个问题：**「如果我把这条指令直接复制粘贴给 AI，它能不问我就开始执行吗？」**
- 「搜集资料」——AI 会问：搜什么？去哪搜？搜多少？不合格，还是骨架级。
- 「打开36Kr，搜索'新能源+趋势+2025'，筛选近半年文章，取前10篇」——AI 可以直接动手。合格，这是原子级。

**【心法】**
流程设计的核心是：把「思考」和「执行」分离。你负责思考怎么拆，Agent 负责机械地执行每一步。思考只做一次，执行可以复用无数次。

**【提示】**
如今主流的通用 Agent 产品（比如 扣子2.0、Manus、Minimax Agent 等产品），都已经内置了「流程设计」这个「思考」环节。

## 4.3 第三步：严格定义每步的输入与输出格式

第3章讲过输入/输出的概念，但在真正搭建工作流时，光知道「输入是什么、输出是什么」还不够，你还必须定义输入/输出的格式和精度。

这就好比工厂里的零件，光说「这个零件是圆的」没用，你必须标注直径是 5mm 还是 50mm、公差是多少。否则上一道工序出来的零件，下一道工序根本装不上去。

**❌ 错误反应：**
「第一步输出'资料'，第二步输入'资料'。」

**💥 后果：**
第一步的 Agent 输出了一堆带 HTML 标签的网页原文，第二步的 Agent 期望接收的是纯文本摘要。格式不匹配，流水线直接断裂。这是工作流搭建中最常见的翻车原因。

**✅ 正确逻辑：**
为每一步的 输入/输出 标注三个维度：内容、格式、数量。

**📝【第三步：输入/输出 精确定义表】**

| 步骤 | 📥 输入 | 加工动作 | 📤 输出 |
| :--- | :--- | :--- | :--- |
| **Step 1：搜索筛选** | 关键词列表（纯文本，3-5个关键词） | 搜索并按时间筛选 | **10 篇文章摘要**<br>格式：Markdown 列表，每条含标题、来源、发布日期、100字核心观点 |
| **Step 2：趋势提炼** | Step 1 的 10 篇摘要（Markdown 格式） | 归类并提炼趋势 | **3 个维度 × 每维度 1-2 条结论**<br>格式：Markdown 表格，含维度、结论、数据来源 |
| **Step 3：大纲生成** | Step 2 的趋势结论表（Markdown 格式） | 结构化组织 | **一份三级标题大纲**<br>格式：Markdown，H1/H2/H3 层级，每个H3下注明要引用的数据点 |
| **Step 4：正文撰写** | Step 3 的大纲 + Step 2 的结论表 | 逐章扩写 | **一篇完整报告（纯文本）**<br>格式：Markdown，不少于 5000 字，每章含结论+数据+案例 |
| **Step 5：排版交付** | Step 4 的完整报告（Markdown 格式） | 格式转换 | **一份 PDF 幻灯片**<br>不少于 20 页，含封面、目录、正文等 |

**💡 关键检查：接口兼容性**

逐一核对：上一步的输出格式，是否恰好等于下一步期望的输入格式？

*   **Step 1 → Step 2**：输出「Markdown 列表」 → 输入「Markdown」 ✅ **格式兼容**
*   **Step 2 → Step 3**：输出「Markdown 表格」 → 输入「Markdown」 ✅ **格式兼容**
*   **Step 3 + Step 2 → Step 4**：输出「大纲」+「结论表」 → 需要同时接收两份输入 ⚠️ 需设置合并节点

当你把输入/输出定义到这个精度时，工作流中 Agent 之间的数据传递就不会再出现「鸡同鸭讲」的问题。

![完整案例：行业研究报告的五步法全流程](images/chapter4_complete_workflow_example.png)

**【心法】**
接口定义的精度，决定了工作流的稳定性。你见过哪条真正的工厂流水线，零件的尺寸规格是「大概差不多」的？

## 4.4 第四步：为每一步分配最合适的执行者

终于到了分工的环节。现在你手里有一张精密的图纸，需要决定：哪些活交给人，哪些活交给 Agent，哪些活交给代码脚本？

**❌ 错误反应：**
「全都交给 AI 做吧，现在的模型很强。」

**💥 后果：**
AI 搜索时产生了幻觉，生造了不存在的数据；AI 写的结论毫无洞察，像一段维基百科摘要。全盘依赖 AI，结果往往是全盘返工。

**✅ 正确逻辑：**
不同类型的任务，有不同的最佳执行者。

**📝【任务分配矩阵】**

| 任务类型 | 最适合的执行者 | 理由 |
| :--- | :--- | :--- |
| **创意决策类**（定选题、定策略、最终拍板） | 人 | AI 不懂你的业务偏好和商业判断，核心决策必须握在人手里。 |
| **海量处理类**（读 100 篇文档、从海量信息中提炼要点） | Agent | AI 的舒适区：不疲倦、不遗漏、速度快。 |
| **标准写作类**（扩写、翻译、润色、格式化） | Agent | 只要你给了结构和要求，AI 就是最好的填充机器。 |
| **精准计算类**（数据统计、格式转换、表格搬运） | 自动化脚本 | 别用 AI，因为 AI 做算术不稳定。这种事交给 Excel 公式或 Python 脚本。 |

### 完整案例走通：「行业研究报告」的分工方案

现在，我们把前面几步定义好的5个步骤，逐一分配执行者：

| 步骤 | 执行者 | 具体安排 | 为什么这样分配？ |
| :--- | :--- | :--- | :--- |
| **Step 1：搜索筛选** | **Agent** | 搜索 Agent 按关键词抓取文章并提取摘要 | 海量信息处理，AI 的强项 |
| **Step 2：趋势提炼** | **Agent + 人审核** | 分析 Agent 归类和提炼趋势；人审阅结论是否靠谱 | AI 擅长归纳，但结论质量需要人把关 |
| **Step 3：大纲生成** | **人** | 人根据趋势结论确定报告结构和重点 | 大纲决定了报告的价值导向，属于创意决策 |
| **Step 4：正文撰写** | **Agent** | 写作 Agent 按大纲逐章扩写 | 标准写作类任务，AI 效率远超人工 |
| **Step 5：排版交付** | **自动化脚本** | Python 脚本将 Markdown 转为 PDF 幻灯片 | 格式转换是确定性操作，用脚本最稳定 |

![人机分工示意图：Human / Agent / Code](images/chapter4_human_agent_code.png)

### 常见分工误区

**误区 1：让 AI 做数据计算。**
你让 Agent 统计「这 10 篇文章中，提到'电池'的文章占比多少」。Agent 回答「60%」，但实际是 70%。AI 做算术天生不靠谱，这种活应该交给 Code。

**误区 2：让 AI 做最终决策。**
你让 Agent 决定「报告的核心结论是投整车厂还是投电池厂」。Agent 给了一个看似合理的回答，但它对你公司的投资策略、风险偏好一无所知。这个决策必须由人来做。

**误区 3：让人做 AI 擅长的苦力活。**
你亲自阅读 50 篇文章并逐篇写摘要。这件事 Agent 用 5 分钟就能完成，你花了一整天。把时间省下来做真正需要你判断力的事情。

**【心法】**
**人机协作的黄金比例**：
*   **人**：负责「开头」的定义和「结尾」的审核（约 20% 的工作量）。
*   **Agent**：负责中间那漫长、枯燥、耗时的处理过程（约 50% 的工作量）。
*   **自动化脚本**：负责精确计算和格式转换等确定性操作（约 30% 的工作量）。

你不需要成为全能选手。你只需要成为一个好导演——知道什么角色该派什么演员。

## 4.5 第五步：将工作流沉淀为可复用资产

如果不做这最后一步，你之前的所有努力就只是一次性的「烟花」。今天费力搭好的工作流，三个月后你可能已经忘了 Prompt 怎么写、Agent 怎么配。

我们必须把这次成功的经验固化成一套「模具」——下次遇到类似任务，直接拿出来用。

**❌ 错误反应：**
「做完了就完了。下次遇到类似任务再说。」

**💥 后果：**
三个月后，老板又让你做一份「新能源车出海市场分析」。你记得上次做过类似的，但 Prompt 忘了怎么写，Agent 的配置也没保存。只好从头再来，又花了三天。你永远在重复劳动，永远无法积累。

**✅ 正确逻辑：**
**资产化。** 把这一套逻辑打包成「三件套」，存到固定的地方。

### 资产沉淀三件套

**📦 第一件：一张标准流程图**

就是你在第3章画的那张图，但现在需要升级为正式版本：
- 标注版本号（如 v1.0），每次优化后递增
- 标注每一步的执行者（人/Agent/自动化脚本）
- 标注关键的输入/输出格式约束
- 存放在固定位置（如飞书文档、Notion 页面），命名清晰：「行业研究报告-工作流-v1.2」

**📦 第二件：一组经过验证的 Prompt**

你在调试过程中反复修改的那些提示词，是最宝贵的资产。把它们整理成标准模板：

> 🎯 示范：搜索 Agent 的 Prompt 模板
>
> ```
> 【角色】你是一名专业的行业研究助理。
> 【任务】根据以下关键词搜索近半年的行业文章，并提取核心观点。
> 【输入】关键词：{keyword_list}
> 【输出要求】
> - 格式：Markdown 列表
> - 数量：10 篇
> - 每篇包含：标题、来源网站、发布日期、100字核心观点摘要
> 【约束】只选取权威媒体来源（36Kr、虎嗅、财新等），忽略营销软文。
> ```

每个 Agent 都保存一份这样的模板。下次使用时，只需替换 `{keyword_list}` 等变量即可。

**📦 第三件：一个可触发的入口**

给这个工作流一个固定的启动方式，让它随时可用：
- 在 Coze / Dify 上：发布为一个智能体或应用，输入关键词就能启动整条流水线
- 在 n8n 上：配置为一个 Webhook 触发的自动化流程
- 最原始的简单方式：在你的笔记软件中建一个「工作流资产库」页面，把流程图、Prompt 模板和操作说明放在一起，需要时照着执行

### 资产化前后对比

| | **没有资产化** | **资产化之后** |
| :--- | :--- | :--- |
| **第一次做** | 摸索 + 调试，花了 3 天 | 摸索 + 调试，花了 3 天 |
| **第二次做** | 凭记忆重来，又花了 2 天 | 调出资产包，替换变量，1 小时搞定 |
| **第五次做** | 还是要花 1-2 天 | 30 分钟搞定，而且质量稳定 |
| **交给别人做** | 教半天，对方还做不好 | 把资产包丢给对方，照着跑就行 |

**【心法】**
判断这一步是否完成的标准：如果明天你突然休假了，能不能直接把这个「资产包」丢给同事，让他不问你一句就跑出 80% 质量的结果？ 如果能，你拥有了一项真正的「可复用资产」。如果不能，说明文档还不够完整。

## 4.6 本章练习：用五步法搭建你的第一条工作流

在前三章的练习中：
- 第1章，你列出了最想自动化的任务
- 第2章，你为其中一个任务设计了数字员工组
- 第3章，你画出了这个任务的完整流程图

现在，请用「工作流五步法」把它从蓝图变成可执行的流水线。

**📝【练习步骤】**

**Step 1：填写目标定义卡**

| 填空项 | 你的填写 |
| :--- | :--- |
| 任务 | |
| 解决什么问题 | |
| 交付物形态 | |
| 验收标准 | |

**Step 2：将步骤升级为原子级**

| 步骤 | 原子级拆解（至少拆成2-3个子步骤） |
| :--- | :--- |
| *你的步骤 1* | |
| *你的步骤 2* | |
| *你的步骤 3* | |

**Step 3：为每步标注精确的输入/输出格式**

| 步骤 | 📥 输入（内容 + 格式 + 数量） | 📤 输出（内容 + 格式 + 数量） |
| :--- | :--- | :--- |
| *你的步骤 1* | | |
| *你的步骤 2* | | |
| *你的步骤 3* | | |

**Step 4：为每步分配执行者**

| 步骤 | 执行者（人/Agent/自动化脚本） | 理由 |
| :--- | :--- | :--- |
| *你的步骤 1* | | |
| *你的步骤 2* | | |
| *你的步骤 3* | | |

**Step 5：打包成资产**
- 给你的工作流起一个名字：________________
- 把流程图、I/O 表格、Prompt 模板存放在一个固定位置
- 尝试把它交给 AI 或同事跑一遍，看看哪里还需要补充说明

保留好这份资产包。在后续的实战案例章节中，你将看到这套方法论如何被应用到短视频、电商、教育等真实场景中。

## 本章结语

「工作流五步法」并不是高深莫测的，它只是把「靠直觉做事」变成了「靠系统做事」。

*   **第1步**：明确目标——不知道终点在哪，跑得再快也是白费。
*   **第2步**：拆解步骤——让每一步都具体到 Agent 能直接执行。
*   **第3步**：锁死格式——让流水线上的每个接头都严丝合缝。
*   **第4步**：因岗定人——让人做决策、Agent 做苦力、脚本做计算。
*   **第5步**：打包沉淀——让一次的努力变成可复用的长期资产。

记住一句话：工作流的价值不在于「搭建」的那一次，而在于「复用」的每一次。你搭建得越规范，复用的成本就越低，时间的杠杆就越大。

到这里，你已经掌握了从「想法」到「系统」的完整路径：画流程图（第3章）、建流水线（第4章）。但流水线上最核心的零件（每个 Agent） ——该怎么精确配置？

下一章，我们将进入全书最精细的环节：如何给 Agent 写一份无懈可击的「岗位说明书」（JD）。一个 Agent 好不好用，80% 取决于这份 JD 写得好不好。
